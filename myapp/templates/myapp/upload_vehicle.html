{% extends 'bases.html' %}
{% load static %}

{% block title %}Upload Vehicle{% endblock %}

{% block content %}

<div class="container mx-auto px-4 py-8 max-w-2xl">
<div class="bg-white rounded-xl shadow-lg p-8">
<h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">Upload a New Vehicle</h1>
<form method="post" enctype="multipart/form-data">
{% csrf_token %}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
             {# Render each field individually to control HTMX attributes #}

                {# Category #}
                <div class="mb-3">
                    {{ form.category.label_tag }}
                    {{ form.category }}
                    {% if form.category.errors %}
                        <div class="invalid-feedback d-block">{{ form.category.errors }}</div>
                    {% endif %}
                </div>

                {# Brand - HTMX enabled #}
                <div class="mb-3">
                    {{ form.brand.label_tag }}
                    {{ form.brand }}
                    {% if form.brand.errors %}
                        <div class="invalid-feedback d-block">{{ form.brand.errors }}</div>
                    {% endif %}
                </div>

                {# Vehicle Model - HTMX target #}
                <div id="div_id_vehicle_model" class="mb-3">
                    {# This div will be swapped by HTMX #}
                    {% include 'myapp/partials/vehicle_model_options.html' with models=form.vehicle_model.field.queryset %}
                </div>

                {# Trim - HTMX target #}
                <div id="div_id_trim" class="mb-3">
                    {# This div will be swapped by HTMX #}
                    {% include 'myapp/partials/trim_options.html' with trims=form.trim.field.queryset %}
                </div>
                
            <!-- <div class="mb-4">
                <label for="id_brand" class="form-label">Brand</label>
                {{ form.brand }}
            </div>
            <div class="mb-4">
                <label for="id_vehicle_model" class="form-label">Model</label>
                {{ form.vehicle_model }}
            </div>
            <div class="mb-4">
                <label for="id_trim" class="form-label">Trim</label>
                {{ form.trim }}
            </div> -->
            <div class="mb-4">
                <label for="id_manufacture_year" class="form-label">Year</label>
                {{ form.manufacture_year }}
            </div>
            <div class="mb-4">
                <label for="id_condition" class="form-label">Condition</label>
                {{ form.condition }}
            </div>
            <div class="mb-4">
                <label for="id_mileage" class="form-label">Mileage</label>
                {{ form.mileage }}
            </div>
            <div class="mb-4">
                <label for="id_engine_size" class="form-label">Engine Size</label>
                {{ form.engine_type }}
            </div>
            <div class="mb-4">
                <label for="id_fuel_option" class="form-label">Fuel Option</label>
                {{ form.fuel_option }}
            </div>
            <div class="mb-4">
                <label for="id_transmission" class="form-label">Transmission</label>
                {{ form.transmission }}
            </div>
            <div class="mb-4">
                <label for="id_drive_terrain" class="form-label">Drive Terrain</label>
                {{ form.drive_terrain }}
            </div>
            <div class="mb-4">
                <label for="id_color" class="form-label">Exterior Color</label>
                {{ form.color }}
            </div>
            <div class="mb-4">
                <label for="id_inner_color" class="form-label">Interior Color</label>
                {{ form.inner_color }}
            </div>
            <div class="mb-4">
                <label for="id_price" class="form-label">Price</label>
                {{ form.price }}
            </div>
            <div class="mb-4 col-span-2">
                <label for="id_description" class="form-label">Description</label>
                {{ form.description }}
            </div>
            <div class="mb-4">
                <label for="id_is_available" class="form-label">Available for Sale</label>
                {{ form.is_available }}
            </div>

            {# Other fields #}
               <div class="row mb-3">
                    <div class="col-md-4 form-check">
                        {{ form.exchange_option }}
                        <label class="form-check-label" for="{{ form.exchange_option.id_for_label }}">
                            Exchange Option
                        </label>
                    </div>
                    <div class="col-md-4 form-check">
                        {{ form.registered }}
                        <label class="form-check-label" for="{{ form.registered.id_for_label }}">
                            Registered
                        </label>
                    </div>
                    <div class="col-md-4 form-check">
                        {{ form.negotiable }}
                        <label class="form-check-label" for="{{ form.negotiable.id_for_label }}">
                            Price Negotiable
                        </label>
                    </div>
                </div>

                {# Many-to-Many - VAS #}
                <div class="mb-3">
                    <label class="form-label d-block">Value Added Services:</label>
                    <div class="d-flex flex-wrap">
                        {% for checkbox in form.vas %}
                            <div class="form-check form-check-inline">
                                {{ checkbox.tag }}
                                <label class="form-check-label" for="{{ checkbox.id_for_label }}">
                                    {{ checkbox.choice_label }}
                                </label>
                            </div>
                        {% endfor %}
                    </div>
                    {% if form.vas.errors %}
                        <div class="invalid-feedback d-block">{{ form.vas.errors }}</div>
                    {% endif %}
                </div>




            <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image</label>
                {{ form.image }}
            </div>
                <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image2</label>
                {{ form.image2 }}
            </div>
                <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image3</label>
                {{ form.image3 }}
            </div>
                <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image3</label>
                {{ form.image4 }}
            </div>
                <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image4</label>
                {{ form.image4 }}
            </div>
                <div class="mb-4 col-span-2">
                <label for="id_image" class="form-label">Vehicle Image5</label>
                {{ form.image5 }}
            </div>
         




            

        </div>
        
        <button type="submit" class="btn btn-primary w-full rounded-lg shadow-md mt-6">
            Upload Vehicle
        </button>
    </form>
</div>

</div>
{% endblock %}